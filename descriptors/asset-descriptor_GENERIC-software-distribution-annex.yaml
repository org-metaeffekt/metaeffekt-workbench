inventories:
  - "inventory":
      folder: "${input.inventory.dir}"
      type: INPUT

  - "reference-inventory":
      folder: "${reference.inventory.path}"
      type: INPUT
      licensePath: "${reference.license.path}"
      componentPath: "${reference.component.path}"

  - "merged-inventory":
      file: "${param.computed.inventory.dir}/${asset.name}-merged-inventory.xlsx"
      type: COMPUTED

transformations:
  "transform-with-maven":
    inputInventories:
      - "inventory"
    outputInventories:
      - "merged-inventory"
    params:
      input.inventory.dir: "${inventory.folder}"
      output.inventory.file: "${merged-inventory.file}"
    maven:
      pom: "${kontinuum.processors.dir}/util/util_merge-inventories.xml"
      workingDir: "."
      command: "process-sources"

documents:
  "software-distribution-annex":
    type: ANNEX
    language: "${document.language}"
    params:
      targetComponentDir: "${target.component.dir}"
      targetLicensesDir: "${target.licenses.dir}"
    parts:
      "software-distribution-annex":
        type: ANNEX
        inventories:
          - inventoryRef: "merged-inventory"
            referenceInventory: "reference-inventory"
            assetName: "${asset.name}"
            assetVersion: "${asset.version}"
